<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.mingi.mapper.CommentMapper">
	
	<select id="getCommentList" resultType="kr.mingi.entity.Comment">
		SELECT * FROM smgComment WHERE boardIdx = #{boardIdx} 
		ORDER BY COALESCE(parentIdx, commentIdx) ${sortOrder}, indate ASC
	</select>

	
	<!-- 댓글작성: 1댓글은 NULL, 대댓글은 부모댓글의 commentIdx -->
	<insert id="insertComment" parameterType="kr.mingi.entity.Comment">
		INSERT INTO smgComment (memID, memName, comment, boardIdx, parentIdx, commentGroup)
		VALUES (#{memID}, #{memName}, #{comment}, #{boardIdx}, #{parentIdx}, #{commentGroup})
	</insert>
	<!-- commentGroup은 부모댓글과 자식댓글 묶음인데 (정렬하기 편하기도 하고), 어떻게 처리할까? DB에서 or 서비스에서 -->
	
	
	
</mapper>